sudo: required
language: python
dist: xenial
cache: pip
python:
- '3.6'
- '3.7'
install:
- pip install --upgrade pip
- pip install --progress-bar off .[tensorflow-cpu]
- pip install flake8==3.7.7
- pip install pytest
- pip install coverage codecov
script:
- flake8 texar/ examples/
- coverage run -m pytest
after_success:
- codecov
- "./scripts/travis_after_success.sh"
jobs:
  include:
  - stage: docs
    python: '3.7'
    install:
    - pip install --upgrade pip
    - sudo apt-get install libenchant1c2a myspell-en-us
    - pip install --progress-bar off -r docs/requirements.txt
    script:
    - cd docs
    - sphinx-build -W -b html -d _build/doctrees . _build/html
    - sphinx-build -b spelling -d _build/doctrees . _build/spelling
notifications:
  mail: false
env:
  matrix:
    secure: ZW0XNdLoh4vhPcdoDtoBRaMDub+a3FO2Cbjhl/WM9tHFO6yKgtbJHsrlZ93/6U56Z0riu3ggugvBJqtTQWmWVoVmD4HDZhWE7MuIp89fXPBOGNC/hEvV/6KW26UPFs5p1VSzPFbKy6OJetmHb/9r5TZhOgc2mJCU+B2Jbst9TpEYe7RAJrT3Sk/5XctjYswvOSYffdC3xF9ZPPZ6toVVafK43L3mH2vQcR3YgXqBzQtjDt7F0otKvMceuR3GE2SyYOH0guNy5Qs91UEHpbOnvHIN1EzUhK/fhWnHKMTaziIV6Q+z6tkHpj4RaiI5Xowv2PXYB71FuJe+5DoZzivisZes8hWG4HNXC6lQg5/on4UOdZQP5l4p4G5rJf2j8Lzn3efvseXeogw/p6W9MV5EoXbqqVGZawHwiU1scIScGcjsJjtSBIbJawJPiW/RO0imYgu9cK1yzH7yd+fmhQPgS+M2MFMF3OipYLrR7Zeh6Pu7A78VwvA7dquunV58nTTmpZFx4Nq4qeFKYO+EXgV8Kaez0NCoSVAj9v5o9RdWPwxuN8IgcFsT1VFgm0Gyahp8csoRuDHobj/QeE4F5ZVGYn++J9PoXDID0z5my2rymg6DX14C64Jw1LyiMMfUk2isGjdggPuJBsL+k5qJAnUbxSRJlHZclsSW5CcsAfiQo9g=
