sudo: required
language: python
dist: xenial
cache: pip
python:
- '3.6'
- '3.7'
install:
- pip install --upgrade pip
- pip install --progress-bar off .[tensorflow-cpu]
- pip install flake8==3.7.7
- pip install pytest
- pip install coverage codecov
script:
- flake8 texar/ examples/
- coverage run -m pytest
after_success:
- codecov
- "./scripts/travis_after_success.sh"
jobs:
  include:
  - stage: docs
    python: '3.7'
    install:
    - pip install --upgrade pip
    - sudo apt-get install libenchant1c2a myspell-en-us
    - pip install --progress-bar off -r docs/requirements.txt
    script:
    - cd docs
    - sphinx-build -W -b html -d _build/doctrees . _build/html
    - sphinx-build -b spelling -d _build/doctrees . _build/spelling
notifications:
  mail: false
env:
  matrix:
    secure: YrH/cmYuprM2l+4aYbwwyfIYQsxkUYPDzz65h+xHN0Y4JuCpJGRITu//M68kvXLceFiC7tgzJ8aAPEKdSFFx/zin9WNhSABWgsUJo2eSu9JeaH8TeBI8J2ly7RayujrZRg+eef2Fg1n/l8ujvDCiIQszh1sxicwY82uAvN/BHP7DytA7voX3J86DzZ7M5IBR4TQ7/3l1KcffHCDK3bEwOkuO0UHW3xoXx/OQhBUVih5E4dKToVq/9K9+cfBpqe/6HAXA1iWpPEmspingqyxLZoomg9RpNPzMeKvNCLcPnuKRGCZ4Aixx1SesjwLlaoN9AurtR7yYbgPz5pyNtFF0J3ojzDiO0qUzdKNzoVeQ5kSyJ7K+FZ2GGsliSAMqYDj35X4O1wT+lS5dxFtrUQsOa4YHxUdKrDjwPFTeA/WArMVTBirH06jmO9PAqXgfXnc0LiMKQZIx1o6E8ibAHs+kr/3wqpmMPaE4z/k2hAga3qAuTMrkV7kTc58vLZTwid2YeJZsdswzB9k+YZobF0eEZDUxk2/eW624ntWemjyjTm8s211DeKhKY3FEGudHx2AIvmSW5+VPV6bZAoTQhX+VD/VbPKQdS3GKQTA2Ayr2hKUTLAU/9yRdrKFVLKk4MVeXgRbQJRzqkpcki4ZRYYlg8KBKlYXXhYYJ8g34GouD1a0=
